FROM node:erbium

LABEL author="casaper (github.com/casaper)"
LABEL name="express server"

ARG working_dir="/app"
ARG default_server="/app/http-server.js"

RUN /usr/local/bin/npm install -g fs path express \
  && mkdir -p "$working_dir"

WORKDIR ${working_dir}

EXPOSE 4000-4999

ENV EXPRESS_SERVER_JS="$default_server"

CMD ["sh", "-c", "/usr/local/bin/node \"${EXPRESS_SERVER_JS}\""]
